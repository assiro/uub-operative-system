
#include <fcntl.h>
#include <stdio.h>
//#include <linux/i2c-dev.h>
#define I2C_SLAVE	0x0703	/* Use this slave address */


int main ()
{

	int file;

	char buf[]={0x00,0x20,
			0x01,0x01,0xB4,0x01,0x02,0x50,0x40,0x00,
            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
            0x00,0x00,0x00,0x00,0x6D,0x02,0x00,0x00,
            0x99,0x03,0x32,0x68,0x00,0x40,0x02,0x08};

	int adapter_nr = 1; /* probably dynamically determined */
	char filename[20];

 snprintf(filename, 19, "/dev/i2c-%d", adapter_nr);
 file = open(filename, O_RDWR);
 if (file < 0) {
   /* ERROR HANDLING; you can check errno to see what went wrong */
   exit(1);
 }

 int addr = 0x65; /* The I2C address */

   if (ioctl(file, I2C_SLAVE, addr) < 0) {
     /* ERROR HANDLING; you can check errno to see what went wrong */
     exit(2);
   }


   /* Using I2C Write, equivalent of
        i2c_smbus_write_word_data(file, reg, 0x6543) */

     if (write(file, buf, sizeof(buf)) != sizeof(buf)) {
       /* ERROR HANDLING: i2c transaction failed */
    	 exit(3);
     }




}
